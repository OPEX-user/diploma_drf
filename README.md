# Django-Surveys-API

<h1>Инструкция по API-интерфейсу</h1>

Работа с приложением осуществляется посредством направления HTTP-запросов серверу с запущенным приложением.<br>
Адреса для обращения указаны относительно сервера. Например, для адреса http://www.your-server.com/<b>api/</b> будет указан относительный путь <b>api/</b><br>

<h2>1. Администрирование</h2>

<h3>Авторизация</h3>

Для получения доступа к функциям администрирования необходимо авторизоваться<br>
Адрес: <b>api/admin/</b><br>
Запрос: <b>POST</b><br>
Параметры:<br>
<ul>
  <li><b>"username"</b>: "имя пользователя"</li>
  <li><b>"password"</b>: "пароль"</li>
</ul>

<h3>Управление опросами</h3>

Сначала необходимо создать опрос. После этого можно будет создавать вопросы для этого опроса.<br><br>
Получить список всех опросов.<br>
Адрес: <b>api/survey/</b><br>
Запрос: <b>GET</b><br>
Ответ: список опросов<br>
<ul>
  <li><b>"title"</b>: "Название опроса"</li>
  <li><b>"description"</b>: "Описание опроса"</li>
  <li><b>"start_date"</b>: "Дата начала опроса"</li>
  <li><b>"end_date"</b>: "Дата завершения опроса"</li>
  <li><b>"is_active"</b>: "Статус опроса"</li>
</ul>

Создать новый опрос.<br>
Адрес: <b>api/survey/</b><br>
Запрос: <b>POST</b><br>
<ul>
  <li><b>"title"</b>: "Название опроса (не больше 255 символов)"</li>
  <li><b>"description"</b>: "Подробное описание опроса"</li>
  <li><b>"start_date"</b>: "Дата начала опроса в формате %Y-%m-%d%H:%M:%S"</li>
  <li><b>"end_date"</b>: "Дата завершения опроса в формате %Y-%m-%d%H:%M:%S"</li>
<li><b>"is_active"</b>: "Статус опроса"</li>
</ul>
Ответ:<br>
<ul>
  <li><b>"Success"</b>: "Сообщение сервера"</li>
</ul>

Изменить существующий опрос.<br>
Адрес: <b>api/survey/int:pk/</b> (где pk - id опроса)<br>
Запрос: <b>PUT</b><br>
Параметры (можно указать лишь те параметры, которые необходимо изменить):<br>
<ul>
  <li><b>"title"</b>: "Название опроса (не больше 255 символов)"</li>
  <li><b>"description"</b>: "Подробное описание опроса"</li>
  <li><b>"start_date"</b>: "Дата начала опроса в формате %Y-%m-%d%H:%M:%S"</li>
  <li><b>"end_date"</b>: "Дата завершения опроса в формате %Y-%m-%d%H:%M:%S"</li>
    <li><b>"is_active"</b>: "Статус опроса"</li>
</ul>
Ответ:<br>
<ul>
  <li><b>"Success"</b>: "Сообщение сервера"</li>
</ul>

Удалить опрос.<br>
Адрес: <b>api/survey/int:pk/</b> (где pk - id опроса)<br>
Запрос: <b>DELETE</b><br>
Ответ:<br>
<ul>
  <li><b>"Success"</b>: "Сообщение сервера"</li>
</ul>

<h3>Управление вопросами</h3>

После того, как Вы создали опрос, можно подключить к нему вопросы.<br><br>
Получить список всех вопросов<br>
Адрес: <b>api/question/</b><br>
Запрос: <b>GET</b><br>
Параметры: без параметров.<br>
Ответ: список вопросов<br>
<ul>
  <li><b>"question_type"</b>: "Тип предполагаемого ответа: TX - ответ текстом, OC - выбор одного варианта, MC - выбор нескольких вариантов"</li>
  <li><b>"text"</b>: "Текст вопроса"</li>
</ul>

Создать новый вопрос.<br>
Адрес: <b>api/question/</b><br>
Запрос: <b>POST</b><br>
<ul>
  <li><b>"survey"</b>: "id опроса, для которого создаётся вопрос"</li>
  <li><b>"question_type"</b>: "Тип предполагаемого ответа: TX - ответ текстом, OC - выбор одного варианта, MC - выбор нескольких вариантов"</li>
  <li><b>"text"</b>: "Текст вопроса"</li>
</ul>
Ответ:<br>
<ul>
  <li><b>"Success"</b>: "Сообщение сервера"</li>
</ul>

Изменить существующий вопрос.<br>
Адрес: <b>api/question/int:pk/</b> (где pk - id вопроса)<br>
Запрос: <b>PUT</b><br>
Параметры (можно указать лишь те параметры, которые необходимо изменить):<br>
<ul>
  <li><b>"survey"</b>: "id опроса, для которого создаётся вопрос"</li>
  <li><b>"question_type"</b>: "Тип предполагаемого ответа: TX - ответ текстом, OC - выбор одного варианта, MC - выбор нескольких вариантов"</li>
  <li><b>"text"</b>: "Текст вопроса"</li>
</ul>
Ответ:<br>
<ul>
  <li><b>"Success"</b>: "Сообщение сервера"</li>
</ul>

Удалить вопрос.<br>
Адрес: <b>api/question/int:pk/</b> (где pk - id вопроса)<br>
Запрос: <b>DELETE</b><br>
Ответ:<br>
<ul>
  <li><b>"Success"</b>: "Сообщение сервера"</li>
</ul>


<h3>Управление вариантами ответов</h3>

После того, как Вы создали вопросы, можно подключить к ним варианты ответов (для тех вопросов, которые предполагают выбор из вариантов).<br><br>
Получить список всех вариантов ответа указанного вопроса.<br>
Адрес: <b>api/answer/</b><br>
Запрос: <b>GET</b><br>
Ответ: список ответов<br>
<ul>
  <li><b>"question"</b>: "id вопроса"</li>
  <li><b>"text"</b>: "Текст варианта ответа"</li>
</ul>

Создать новый ответ.<br>
Адрес: <b>answer/<br>
Запрос: <b>POST</b><br>
Параметры:<br>
<ul>
  <li><b>"question"</b>: "id вопроса, для которого создаётся вариант ответа"</li>
  <li><b>"text"</b>: "Текст варианта ответа"</li>
</ul>
Ответ:<br>
<ul>
  <li><b>"Success"</b>: "Сообщение сервера"</li>
</ul>

Изменить существующий ответ.<br>
Адрес: <b>api/answer/int:pk/</b> (где pk - id варианта ответа)<br>
Запрос: <b>PUT</b><br>
Параметры (можно указать лишь те параметры, которые необходимо изменить):<br>
<ul>
  <li><b>"question"</b>: "id вопроса, для которого создаётся вариант ответа"</li>
  <li><b>"text"</b>: "Текст варианта ответа"</li>
</ul>
Ответ:<br>
<ul>
  <li><b>"Success"</b>: "Сообщение сервера"</li>
</ul>

Удалить ответ.<br>
Адрес: <b>api/answer/int:pk/</b> (где pk - id варианта ответа)<br>
Запрос: <b>DELETE</b><br>
Ответ:<br>
<ul>
  <li><b>"Success"</b>: "Сообщение сервера"</li>
</ul>

<h3>Управление пользователями</h3>
Получить список всех зарегистрированных пользователей<br>
Адрес: <b>api/user/</b><br>
Запрос: <b>GET</b><br>
Ответ: список ответов<br>
<ul>
  <li><b>"username"</b>: "Никнейм пользователя"</li>
  <li><b>"first_name"</b>: "Имя пользователя"</li>
<li><b>"last_name"</b>: "Фамилия пользователя"</li>
  <li><b>"email"</b>: "Почта пользователя"</li>
</ul>

Создать нового пользователя.<br>
Адрес: <b>api/user/<br>
Запрос: <b>POST</b><br>
Параметры:<br>
<ul>
  <li><b>"username"</b>: "Никнейм пользователя"</li>
  <li><b>"first_name"</b>: "Имя пользователя"</li>
<li><b>"last_name"</b>: "Фамилия пользователя"</li>
  <li><b>"email"</b>: "Почта пользователя"</li>
</ul>
Ответ:<br>
<ul>
  <li><b>"Success"</b>: "Сообщение сервера"</li>
</ul>
Изменить данные пользователя.<br>
Адрес: <b>api/user/int:pk/</b> (где pk - id пользователя)<br>
Запрос: <b>PUT</b><br>
Параметры (можно указать лишь те параметры, которые необходимо изменить):<br>
<ul>
  <li><b>"username"</b>: "Никнейм пользователя"</li>
  <li><b>"first_name"</b>: "Имя пользователя"</li>
<li><b>"last_name"</b>: "Фамилия пользователя"</li>
  <li><b>"email"</b>: "Почта пользователя"</li>
</ul>
Ответ:<br>
<ul>
  <li><b>"Success"</b>: "Сообщение сервера"</li>
</ul>
Удалить ответ.<br>
Адрес: <b>api/user/int:pk/</b> (где pk - id пользователя)<br>
Запрос: <b>DELETE</b><br>
Ответ:<br>
<ul>
  <li><b>"Success"</b>: "Сообщение сервера"</li>
</ul>
<h2>2. Функционал пользователя</h2>

<h3>Авторизация</h3>

Пользователю для доступа необходимо пройти регистрацию и авторизацию.<br>
Регистрация пользователя.<br>
Адрес: <b>api/register/<br>
Запрос: <b>POST</b><br>
Параметры:<br>
<ul>
  <li><b>"id"</b>: "id пользователя"</li>
  <li><b>"username"</b>: "Никнейм пользователя"</li>
<li><b>"email"</b>: "Почта пользователя"</li>
  <li><b>"password"</b>: "Пароль пользователя"</li>
</ul>
Ответ:<br>
<ul>
  <li><b>"Success"</b>: "Сообщение сервера"</li>
</ul>
Авторизация пользователя.<br>
Адрес: <b>api/login/<br>
Запрос: <b>POST</b><br>
Параметры:<br>
<ul>
<li><b>"email"</b>: "Почта пользователя"</li>
  <li><b>"password"</b>: "Пароль пользователя"</li>
</ul>
Ответ:<br>
<ul>
  <li><b>"jwt"</b>: "Токен пользователя"</li>
</ul>
Выход из системы.<br>
Адрес: <b>api/logout/<br>
Запрос: <b>POST</b><br>
Ответ:<br>
<ul>
  <li><b>"Success"</b>: "Сообщение сервера"</li>
</ul>
Изменение пароля.<br>
Адрес: <b>api/change_password/<br>
Запрос: <b>POST</b><br>
Параметры:<br>
<ul>
<li><b>"old_password"</b>: "Старый пароль пользователя"</li>
  <li><b>"new_password"</b>: "Новый пароль пользователя"</li>
</ul>
Ответ:<br>
<ul>
  <li><b>"Success"</b>: "Сообщение сервера"</li>
</ul>
Сброс пароля.<br>
Адрес: <b>api/reset_password/<br>
Запрос: <b>POST</b><br>
Параметры:<br>
<ul>
<li><b>"new_password"</b>: "Новый пароль пользователя"</li>
  <li><b>"confirm_password"</b>: "Повторный ввод нового пароля для сброса старого"</li>
</ul>
Ответ:<br>
<ul>
  <li><b>"Success"</b>: "Сообщение сервера"</li>
</ul>
<h3>Просмотр опросов</h3>

ПоПолучить список всех опросов.<br>
Адрес: <b>api/survey/</b><br>
Запрос: <b>GET</b><br>
Ответ: список опросов<br>
<ul>
  <li><b>"title"</b>: "Название опроса"</li>
  <li><b>"description"</b>: "Описание опроса"</li>
  <li><b>"start_date"</b>: "Дата начала опроса"</li>
  <li><b>"end_date"</b>: "Дата завершения опроса"</li>
  <li><b>"is_active"</b>: "Статус опроса"</li>
</ul>

Получить список вопросов<br>
Адрес: <b>api/question/</b><br>
Запрос: <b>GET</b><br>
Параметры: без параметров.<br>
Ответ: список вопросов<br>
<ul>
  <li><b>"question_type"</b>: "Тип предполагаемого ответа: TX - ответ текстом, OC - выбор одного варианта, MC - выбор нескольких вариантов"</li>
  <li><b>"text"</b>: "Текст вопроса"</li>
</ul>

Просмотреть вопрос и получить список вариантов ответов.<br>
Адрес: <b>api/responses/</b><br>
Запрос: <b>GET</b><br>
Ответ: список ответов<br>
<ul>
  <li><b>"question"</b>: "id вопроса"</li>
  <li><b>"selected_option"</b>: "Выбранный вариант"</li>
  <li><b>"text_response"</b>: "Текст вопроса"</li>
  <li><b>"user_id"</b>: "id пользователя"</li>
</ul>

<h3>Отправка ответов</h3>

После того, как пользователь ответил на все вопросы, он может загрузить ответы на сервер.<br>
Адрес: <b>api/response/</b><br>
Запрос: <b>POST</b><br>
Параметры: список ответов<br>
<ul>
  <li><b>"question"</b>: "id вопроса"</li>
  <li><b>"selected_option"</b>: "Выбранный вариант"</li>
  <li><b>"text_response"</b>: "Текст вопроса"</li>
  <li><b>"user_id"</b>: "id пользователя"</li>
</ul>
Пример:<br>
[<br>
    {<br>
        "question": "1",<br>
        "selected_option": "1",<br>
        "text_response": "This is a text answer for question #1.",<br>
        "user_id": "1"<br>
    },<br>
    {<br>
        "question": "2",<br>
        "selected_option": "2",<br>
        "text_response": "This is a text answer for question #2.",<br>
        "user_id": "1"<br>
    },<br>
]<br>

Ответ:<br>
<ul>
  <li><b>"Success"</b>: "Сообщение сервера"</li>
</ul>
# diploma_drf
